Last login: Fri Jun 23 13:22:37 on ttys016
'/Applications/Postgres.app/Contents/Versions/9.5/bin'/psql -p5432
tso:~ matthewtso$ '/Applications/Postgres.app/Contents/Versions/9.5/bin'/psql -p5432
psql (9.5.4)
Type "help" for help.

matthewtso=# CREATE TYPE status AS ENUM ('StatusRequested', 'StatusAccepted', 'StatusCanceled'); CREATE TABLE IF NOT EXISTS Trades (id      bigserial NOT NULL UNIQUE,user_id bigint    NOT NULL,book_id bigint    NOT NULL,status  status    NOT NULL DEFAULT 'StatusRequested');
CREATE TYPE
CREATE TABLE
matthewtso=# INSERT INTO Trades (user_id, book_id) VALUES (2, 1);
INSERT 0 1
matthewtso=# select * from trades;
 id | user_id | book_id |     status      
----+---------+---------+-----------------
  1 |       2 |       1 | StatusRequested
(1 row)

matthewtso=# SELECT id, users.id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
ERROR:  relation "users" does not exist
LINE 1: SELECT id, users.id, book_id, status FROM Trades, Users, Boo...
                                                          ^
matthewtso=# SELECT id, users.id, book_id, status FROM Trades, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
ERROR:  relation "books" does not exist
LINE 1: SELECT id, users.id, book_id, status FROM Trades, Books WHER...
                                                          ^
matthewtso=# SELECT id, user_id, book_id, status FROM Trades, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
ERROR:  relation "books" does not exist
LINE 1: SELECT id, user_id, book_id, status FROM Trades, Books WHERE...
                                                         ^
matthewtso=# \dt
           List of relations
 Schema |  Name   | Type  |   Owner    
--------+---------+-------+------------
 public | Choices | table | matthewtso
 public | Polls   | table | matthewtso
 public | trades  | table | matthewtso
(3 rows)

matthewtso=# \c booker
You are now connected to database "booker" as user "matthewtso".
booker=# CREATE TYPE status AS ENUM ('StatusRequested', 'StatusAccepted', 'StatusCanceled'); CREATE TABLE IF NOT EXISTS Trades (id      bigserial NOT NULL UNIQUE,user_id bigint    NOT NULL,book_id bigint    NOT NULL,status  status    NOT NULL DEFAULT 'StatusRequested');
CREATE TYPE
CREATE TABLE
booker=# INSERT INTO Trades (user_id, book_id) VALUES (2, 1);
INSERT 0 1
booker=# SELECT id, user_id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
ERROR:  column reference "id" is ambiguous
LINE 1: SELECT id, user_id, book_id, status FROM Trades, Users, Book...
               ^
booker=# SELECT trades.id, user_id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
ERROR:  column reference "user_id" is ambiguous
LINE 1: SELECT trades.id, user_id, book_id, status FROM Trades, User...
                          ^
booker=# SELECT trades.id, trades.user_id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | user_id | book_id |     status      
----+---------+---------+-----------------
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
  1 |       2 |       1 | StatusRequested
(27 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, trades.user_id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | user_id | book_id |     status      
----+---------+---------+-----------------
  1 |       2 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
(1 row)

booker=# INSERT INTO Trades (user_id, book_id) VALUES (3, 1);                   
INSERT 0 1
booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
  2 | testuser2 |       1 | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, trades.user_id, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | user_id | book_id |     status      
----+---------+---------+-----------------
  1 |       2 |       1 | StatusRequested
  2 |       3 |       1 | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested';
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
  2 | testuser2 |       1 | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
  2 | testuser3 |       1 | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE books.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
  2 | testuser3 |       1 | StatusRequested
(2 rows)

booker=# select * from trades;
 id | user_id | book_id |     status      
----+---------+---------+-----------------
  1 |       2 |       1 | StatusRequested
  2 |       3 |       1 | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, book_id, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | book_id |     status      
----+---------+-----------------
  1 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, books.id, books.title, books.image_url, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | id | title |                                        image_url                                         |     status      
----+-----------+----+-------+------------------------------------------------------------------------------------------+-----------------
  1 | testuser2 |  1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
  2 | testuser3 |  1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, users.city, users.state, books.id, books.title, books.image_url, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | city | state | id | title |                                        image_url                                         |     status      
----+-----------+------+-------+----+-------+------------------------------------------------------------------------------------------+-----------------
  1 | testuser2 |      |       |  1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
  2 | testuser3 |      |       |  1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
(2 rows)

booker=# SELECT DISTINCT ON(trades.id) trades.id, book_id, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | book_id |     status      
----+---------+-----------------
  1 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser2 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, book_id, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = books.user_id;
 id | username  | book_id |     status      
----+-----------+---------+-----------------
  1 | testuser1 |       1 | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, users.city, users.state, books.id, books.title, books.image_url, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = books.user_id;
 id | username  |   city    |   state    | id | title |                                        image_url                                         |     status      
----+-----------+-----------+------------+----+-------+------------------------------------------------------------------------------------------+-----------------
  1 | testuser1 | Test City | Test State |  1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, users.city, users.state, book_id, books.title, books.image_url, status FROM Trades, Users, Books WHERE trades.user_id = 2 AND trades.status = 'StatusRequested' AND users.id = books.user_id;
 id | username  |   city    |   state    | book_id | title |                                        image_url                                         |     status      
----+-----------+-----------+------------+---------+-------+------------------------------------------------------------------------------------------+-----------------
  1 | testuser1 | Test City | Test State |       1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
(1 row)

booker=# SELECT DISTINCT ON(trades.id) trades.id, users.username, users.city, users.state, book_id, books.title, books.image_url, status FROM Trades, Users, Books WHERE books.user_id = 1 AND trades.status = 'StatusRequested' AND users.id = trades.user_id;
 id | username  | city | state | book_id | title |                                        image_url                                         |     status      
----+-----------+------+-------+---------+-------+------------------------------------------------------------------------------------------+-----------------
  1 | testuser2 |      |       |       1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
  2 | testuser3 |      |       |       1 | 1Q84  | https://images-na.ssl-images-amazon.com/images/I/41aXLI626BL._SX323_BO1,204,203,200_.jpg | StatusRequested
(2 rows)

booker=# 
